---
title: "EEW Congressional Report Card"
output: 
  html_paged:
    number_sections: false
    css: ["custom.css"]
---

```{r setup, include=FALSE}
library(tidyverse)
library(pagedown)
library(palmerpenguins)
library(patchwork)
library(here)
library(ggplot2)
library(tidyr)
library(dplyr)
library(shiny)
library(extrafont)
library(viridis)
library(grid)
library(gridExtra)
library(fishualize)
library(kableExtra)
library(ggrepel)
loadfonts()
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r readData, echo=FALSE}
#reading in all of the data and naming it based on the name of the .csv up to the first 2 underscores
#national data
filenames = list.files(here("nationalstats"), pattern = ".csv")
file_count = length(filenames)
for (i in filenames){  
  name <- gsub("^([^_]*_[^_]*)_.*$","\\1", i)
  assign(name, read.csv(here("nationalstats", i)))
}
names(USAinspectionsper1000_All)[1] <- "Program"
names(USAviolationsper1000_All)[1] <- "Program"
#each time this section is run, change "here" to specify the subfolder for the district or state 
#Also, the way it is set up, you're going to need to cntrl f to change the district and date for the files
filenames = list.files(here("MD3"), pattern = ".csv")
file_count = length(filenames)
for (i in filenames){  
  name <- gsub("^([^_]*_[^_]*_[^_]*_[^-]*-[^-]*)-.*$","\\1", i)
  assign(name, read.csv(here("MD3", i)))
}
activefacilities <- `active-facilities_All_pg3_MD-3`
#set up a theme default to reduce code block later 
theme_meg <- function () { 
  theme_bw(base_family="Georgia") %+replace% 
    theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),panel.border = element_blank(),
          axis.line = element_line(colour = "black"), axis.title.x=element_text(face = "bold", size = 12), 
          axis.title.y=element_text(face = "bold", size = 10, angle=90), plot.title=element_text(face = "bold", size = 14, hjust =.5), 
          axis.text.x=element_text(face = "bold", size = 14), axis.text.y=element_text(face = "bold", size = 8))
}
theme_megpie <- function () { 
  theme_bw(base_family="Georgia") %+replace% 
    theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),panel.border = element_blank(),
          axis.line = element_line(colour = "black"), axis.title.x=element_text(face = "bold", size = 4), 
          axis.title.y=element_text(face = "bold", size = 2, angle=90), plot.title=element_text(face = "bold", size = 8, hjust =.5), 
          axis.text.x=element_text(face = "bold", size = 2), axis.text.y=element_text(face = "bold", size = 2))
}
```
 <div class="container">
  <img src="/Users/mraisle/Documents/OneDrive - University of North Carolina at Chapel Hill/CD-report/MD3/MD3_map.png" alt="Snow" style="width:100%;">
  <div class="top-left">Maryland's 3rd District</div>
  <div class="middle-left">Seat held by John Sarbanes since 2007</div>
  <div class="bottom-left">Report Generated 2 September 2020</div>
</div>
<p style="font-size:6pt; font-style:italic">
Map above shows congressional district with clusters of regulated facilities
</p>
The [Environmental Enforcement Watch](https://www.environmentalenforcementwatch.org/) (EEW), a project of [EDGI](https://envirodatagov.org/), produced this report using data from the EPA. It provides information about pollution violations and the EPA’s efforts to control pollution. Congress has the power to strengthen and oversee how well EPA protects us from pollution. 
<a href="https://www.environmentalenforcementwatch.org/"><img src="/Users/mraisle/Documents/OneDrive - University of North Carolina at Chapel Hill/CD-report/reportcards/eew_logo.png" style="float: left; width: 15%; margin-left: 20%" ></a>
<a href="https://envirodatagov.org/"><img src="/Users/mraisle/Documents/OneDrive - University of North Carolina at Chapel Hill/CD-report/reportcards/edgi_logo.png" style="float: right; width: 25%; margin-right: 20%" ></a>
<p style="font-size:6pt; font-style:italic; padding-top:60px">
**Disclaimer:**
Data included herein were drawn from EPA's publicly available Enforcement and Compliance History Online ECHO database on August 25, 2020. EDGI has no control over the nature, content, or sustained availability of this database. While EDGI works to assure that the information in this report is correct, that information is subject to limitations of the ECHO database, and is provided “as is.” EDGI makes no representations or warranties of aOR kind, express or implied, about the completeness or reliability of this information. The information and images within this report are for general information purposes only. To examine this data for yourself you can view our analysis here and re-run it here.
</p>
\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">

##### DRAFT not for circulation

# Why and What 

## Why
It is Congress's job to oversee how the laws it passes are implemented by agencies like the Environmental Protection Agency (EPA). Congress has charged the EPA with enforcing most of the laws that protect environmental health by controlling the release of pollution and hazardous materials into the air, water and land. Without effective enforcement, **these laws are meaningless**. Congress can strengthen EPA enforcement by increasing resources to the EPA, passing more effective laws, requiring better data collection, and general oversight. In the **House of Representatives**, the **Energy and Commerce Committee** is the main committee that oversees the EPA.  In the **Senate**, the **Environment and Public Works Committee** is the main committee that oversees the EPA. 

## What - the Data in this report 
While ECHO remains the only publicly available and comprehensive source for environmental compliance data, it is known to be extremely unreliable. According to former EPA Administrator Cynthia Giles, states often report less than 5% of violations under the regulations controlling clean air and hazardous waste, which means that ECHO data may exclude more than 95% of such violations. Therefore, other than the Clean Water Act, for which violations are reported through an automated system, violation data should not be considered accurate. It is important to note that states which might have the most violations may actually be the most responsible in terms of their reporting to EPA. Below is a color code of reliability for each data type presented in this report: 

```{r data, eval=TRUE, warning=FALSE, echo=FALSE}
#make dataframe
datacheck <-data.frame("Metric"=c("CWA Inspections and Violations; GHG Emissions","CAA Inspections,
                                    RCRA Inspections; CAA, CWA and RCRA Enforcement Actions and
                                    Penalities", "CAA Violations, RCRA violations"),
                          "Color"=c("Green", "Yellow", "Red"),
                          "Why"=c("Automatic monitoring and Reporting", "Problems of pass through of data from state to EPA", "Problems of self-reporting and pass through of data from state to EPA"))
head(datacheck) %>%
  kable() %>%
  row_spec(c(1), color="black", bold=TRUE, background  = "#50C878") %>%
  row_spec(c(2), color="black", bold=TRUE, background = "#FFD300") %>%
  row_spec(c(3), color="black", bold=TRUE, background="#C21807") 
  
```
### See part 2 of [this report](http://eelp.law.harvard.edu/wp-content/uploads/Cynthia-Giles-Part-2-FINAL.pdf) for more information about lack of reporting 
\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">

##### DRAFT not for circulation
```{r echo=FALSE}
#CAA
##first let's fix up the data
#ok so We'll put the % in the title for the state, and try to figure out the same for MD 3
CAArecurring <- `recurring-violations_All_pg3_MD-3`[-c(2,3,5,6),]
CAArecurring <- CAArecurring %>%
  select(CD,Facilities, Percent)
names(CAArecurring)[1] <- "Region"
CAArecurring[1,1] <- as.character("Rest of State")
CAArecurring[2,1] <- as.character("MD 3")
CAArecurring$Region2 <- as.character("All of OR")
CAArecurring[2,4] <- as.character("MD 3")
CAArecurring$RecurringViolators <- (as.numeric(CAArecurring[1,2]-CAArecurring[2,2]))
CAArecurring[2,5] <- as.numeric(CAArecurring[2,2])
CAArecurring$Proportional <- (as.numeric((100/(CAArecurring[1,2]))*CAArecurring[1,5]))
CAArecurring[2,6] <- as.numeric(100-CAArecurring[1,6])
CAArecurring[3] <-round(CAArecurring[3],2)
#CWA
##first let's fix up the data
#ok so We'll put the % in the title for the state, and try to figure out the same for MD 3
CWArecurring <- `recurring-violations_All_pg3_MD-3`[-c(1,3,4,6),]
CWArecurring <- CWArecurring %>%
  select(CD,Facilities, Percent)
names(CWArecurring)[1] <- "Region"
CWArecurring[1,1] <- as.character("Rest of State")
CWArecurring[2,1] <- as.character("MD 3")
CWArecurring$Region2 <- as.character("All of OR")
CWArecurring[2,4] <- as.character("MD 3")
CWArecurring$RecurringViolators <- (as.numeric(CWArecurring[1,2]-CWArecurring[2,2]))
CWArecurring[2,5] <- as.numeric(CWArecurring[2,2])
CWArecurring$Proportional <- (as.numeric((100/(CWArecurring[1,2]))*CWArecurring[1,5]))
CWArecurring[2,6] <- as.numeric(100-CWArecurring[1,6])
CWArecurring[3] <-round(CWArecurring[3],2)
#RCRA
##first let's fix up the data
#ok so We'll put the % in the title for the state, and try to figure out the same for MD 3
RCRArecurring <- `recurring-violations_All_pg3_MD-3`[-c(1,2,4,5),]
RCRArecurring <- RCRArecurring %>%
  select(CD,Facilities, Percent)
names(RCRArecurring)[1] <- "Region"
RCRArecurring[1,1] <- as.character("Rest of State")
RCRArecurring[2,1] <- as.character("MD 3")
RCRArecurring$Region2 <- as.character("All of OR")
RCRArecurring[2,4] <- as.character("MD 3")
RCRArecurring$RecurringViolators <- (as.numeric(RCRArecurring[1,2]-RCRArecurring[2,2]))
RCRArecurring[2,5] <- as.numeric(RCRArecurring[2,2])
RCRArecurring$Proportional <- (as.numeric((100/(RCRArecurring[1,2]))*RCRArecurring[1,5]))
RCRArecurring[2,6] <- as.numeric(100-RCRArecurring[1,6])
RCRArecurring[3] <-round(RCRArecurring[3],2)
```

```{r echo=FALSE}
##getting %difference effluent violations
##So, we're going to do the first 3 years of Obama and Trump so average
#[9:11,2] Obama
# [17:19,2] Trump
effluentviolations <- `effluent-violations_CWA_pg3_MD-3`
effluentviolations <- effluentviolations[-c(20),]
effluentchange <- data.frame("Obama Average" =mean(effluentviolations[9:11,2]),
                             "Trump Average" =mean(effluentviolations[17:19,2]))
effluentchange$PercentDifference <- as.numeric(100*(effluentchange[1,2]-effluentchange[1,1])/
                                                 effluentchange[1,1])
effluentchange[,1:3] <-round(effluentchange[,1:3],2)
#then simple plot
#first add in the Presidential Years
effluentviolations$President <- as.character("Bush")
effluentviolations[9:16,3] <- as.character("Obama")
effluentviolations[17:19,3] <- as.character("Trump")
effluentgraph <- ggplot(effluentviolations, mapping=aes(x=factor(Year),
  y=Violations, fill=President, group=1))+
  geom_bar(stat="identity")+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y="Violations", x="Year")+
  ggtitle("Clean Water Act Violations")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(effluentviolations$Violations+(.2*max(effluentviolations$Violations)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016,2019))+
  theme_meg()+
  theme(axis.text.x=element_text(size=9), axis.title.x = element_blank())
##Inspections % change and graph
##So, we're going to do the first 3 years of Obama and Trump so average
#[9:11,2] Obama
# [17:19,2] Trump
inspections <- `inspections_All_pg3_MD-3`
inspections <- inspections[-c(20),]
inspectionchange <- data.frame("Obama Average" =mean(inspections[9:11,2]),
                             "Trump Average" =mean(inspections[17:19,2]))
inspectionchange$PercentDifference <- as.numeric(100*(inspectionchange[1,2]-inspectionchange[1,1])/
                                                 inspectionchange[1,1])
inspectionchange[,1:3] <-round(inspectionchange[,1:3],2)
#inspectionchange$NetPercent <- as.numeric(-inspectionchange[1,3])
#then simple plot
#first add in the Presidential Years
inspections$President <- as.character("Bush")
inspections[9:16,3] <- as.character("Obama")
inspections[17:19,3] <- as.character("Trump")
inspectiongraph <- ggplot(inspections, mapping=aes(x=factor(Date),
                                                        y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y="Inspections", x="Year")+
  ggtitle("Facility Inspections-All Programs")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(inspections$Count+(.2*max(inspections$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016,2019))+
  theme_meg()+
  theme(axis.title.x = element_blank(), axis.text.x=element_text(size=9))
#enforcement
##So, we're going to do the first 3 years of Obama and Trump so average
#[9:11,2] Obama
# [17:19,2] Trump
enforcement <- `enforcements_All_pg3_MD-3`
enforcement <- enforcement[-c(20),]
enforcement$Amount <- round(enforcement$Amount,0)
enforcementchange <- data.frame("Obama Average Count" =mean(enforcement[9:11,2]),
                               "Trump Average Count" =mean(enforcement[17:19,2]),
                               "Obama Average Fine" =mean(enforcement[9:11,3]),
                               "Trump Average Fine" =mean(enforcement[17:19,3]))
enforcementchange$PercentDifferenceCount <- as.numeric(100*(enforcementchange[1,2]-enforcementchange[1,1])/
                                                   enforcementchange[1,1])
enforcementchange$PercentDifferenceFine <- as.numeric(100*(enforcementchange[1,4]-enforcementchange[1,3])/
                                                         enforcementchange[1,3])
enforcementchange[,1:6] <-round(enforcementchange[,1:6],2)
##make a new amount column /1000
enforcement$Amountinthousands <- ((enforcement$Amount)/1000)
enforcement$Amountinthousands <-round(enforcement$Amountinthousands,0)
#plot change in enforcement
enforcement$President <- as.character("Bush")
enforcement[9:16,5] <- as.character("Obama")
enforcement[17:19,5] <- as.character("Trump")
enforcementactiongraph <- ggplot(enforcement, mapping=aes(x=factor(Date),y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y="# Actions", x="Year")+
  ggtitle("Enforcement Actions-All Programs")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(enforcement$Count+(.2*max(enforcement$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016,2019))+
  theme_meg()+
  theme(axis.text.x=element_text(size=9),axis.title.x = element_blank())
enforcementfinegraph <- enforcement %>% ggplot()+
  geom_bar(aes(x=factor(Date),y=Amountinthousands , fill=President, group=1),stat="identity", show.legend=FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y="Fines ($1000s)", x="Year")+
  ggtitle("Enforcement Fines-All Programs")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(enforcement$Amountinthousands+(.2*max(enforcement$Amountinthousands)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016,2019))+
  theme_meg()+
  theme(axis.text.x=element_text(size=9),axis.title.x = element_blank())
```
# Highlights for Maryland's 3rd District
* <h2>Highlight from Open Hour</h2>
* <h2>Comparing the first 3 years of the Obama administration to the first 3 years of the Trump administration, there has been `r inspectionchange[1,3]`% change in inspections, a `r enforcementchange[1,5]`% change in enforcement actions, and a `r enforcementchange[1,6]`% change in enforcement fines.</h2>
* <h2>Under the Clean Water Act, the only well-reported regulation in this report, `r CWArecurring[2,2]` facilities, representing `r CWArecurring[2,3]`% of all regulated facilities in MD3, were in violation for at least 25% of the last 3 years.</h2>
```{r echo=FALSE, out.width= "95%", out.extra='style="float:center; padding:0px"'}
effluentgraph/inspectiongraph/enforcementactiongraph/enforcementfinegraph
```
\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">

##### DRAFT not for circulation

# Your District in Comparison
```{r, fig.height = 6, fig.width = 8, fig.align = "left"}
#comparing inspections
#let's combine the inspections data at national, state, CD level 
names(USAinspectionsper1000_All)[2] <- "Inspectionsper1000"
USAinspectionsper1000_All$Region <- as.factor("National")
names(`inspectionsper1000_All_pg4_MD-090220.csv`)[2] <- "Inspectionsper1000"
`inspectionsper1000_All_pg4_MD-090220.csv`$Region <- as.factor("State")
names(`inspectionsper1000_All_pg4_MD-3`)[2] <- "Inspectionsper1000"
`inspectionsper1000_All_pg4_MD-3`$Region <- as.factor("Congressional District")
inspectionsper1000 <- rbind(USAinspectionsper1000_All, `inspectionsper1000_All_pg4_MD-090220.csv`, `inspectionsper1000_All_pg4_MD-3`)
inspectionsper1000$Inspectionsper1000 <- as.numeric(inspectionsper1000$Inspectionsper1000)
inspectionsper1000[2] <-round(inspectionsper1000[2],0) 
#Now let's visualize this 
inspect1000bar <- ggplot(inspectionsper1000, aes(fill=Region, y=Inspectionsper1000, x=Program))+
  geom_bar(position="dodge", stat="identity", show.legend=FALSE)+
  scale_fill_manual(values=c("#999999" , "#333333", "#d43a69"))+
  labs(y="Inspections per 1000 Facilities\n", x="")+
  geom_text(aes(label=Inspectionsper1000, family="Georgia"), position = position_dodge(0.9), vjust = -0.1, size=4)+
  ggtitle("Inspections per 1000 Facilities in 2019")+
  scale_y_continuous(expand=c(0,0),limits=c(0,max(inspectionsper1000$Inspectionsper1000+(.2*max(inspectionsper1000$Inspectionsper1000)))))+
  theme_meg()+
  theme(axis.text.x = element_text(color =(values=c("#FFD300" , "#50C878", "#FFD300"))))
#comparing violations
#let's combine the violations data at national, state, CD level 
names(USAviolationsper1000_All)[2] <- "violationsper1000"
USAviolationsper1000_All$Region <- as.factor("National")
names(`violationsper1000_All_pg4_MD-090220.csv`)[2] <- "violationsper1000"
`violationsper1000_All_pg4_MD-090220.csv`$Region <- as.factor("State")
names(`violationsper1000_All_pg4_MD-3`)[2] <- "violationsper1000"
`violationsper1000_All_pg4_MD-3`$Region <- as.factor("Congressional District")
violationsper1000 <- rbind(USAviolationsper1000_All, `violationsper1000_All_pg4_MD-090220.csv`, `violationsper1000_All_pg4_MD-3`)
violationsper1000$violationsper1000 <- as.numeric(violationsper1000$violationsper1000)
violationsper1000[2] <-round(violationsper1000[2],0)
#Now let's visualize this 
violations1000bar <- ggplot(violationsper1000, aes(fill=Region, y=violationsper1000, x=Program))+
  geom_bar(position="dodge", stat="identity")+
  scale_fill_manual(values=c("#999999" , "#333333", "#d43a69"))+
  labs(y="Violations per 1000 Facilities", x="")+
  geom_text(aes(label=violationsper1000, family="Georgia"), position = position_dodge(0.9), vjust = -0.1, size=4)+
  ggtitle("Violations per 1000 Facilities in 2019")+
  scale_y_continuous(expand=c(0,0),limits=c(0,max(violationsper1000$violationsper1000+(.2*max(violationsper1000$violationsper1000)))))+
  theme_meg()+
  theme(legend.position = c(0.8, 0.5),axis.text.x = element_text(color =(values=c("#C21807" , "#50C878", "#C21807"))))
inspect1000bar / violations1000bar
  
```

### See color-coded table on page 1 for data reliability color codes, visualized here as x-axis labels and on subsequent pages as chart titles

\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">
##### DRAFT not for circulation 

# Clean Air Act

<div class="text-box-info">

The Clean Air Act (CAA) is the comprehensive federal law that regulates air emissions from stationary and mobile sources. Among other things, this law authorizes EPA to establish National Ambient Air Quality Standards (NAAQS) to protect public health and to regulate emissions of hazardous air pollutants [EPA](https://www.epa.gov/laws-regulations/summary-clean-air-act). For the CAA, inspections are the most common way of identifying violations, so less violations aren't necessarily an improvement. Recent cuts in inspections is likely related to a drop in violations.
[More info on CAA](https://docs.google.com/presentation/d/1MzRQf3QeJqmYMSttdk0ghrXeOmOZgOV_MTynl-ri6Ik/edit?usp=sharing)
</div>
<h2>There are `r activefacilities[1,2] ` 
`r activefacilities[1,1]` facilities</h2>
```{r, fig.height = 5, fig.width = 8, fig.align = "center"}
#clean up data
CAAviolations <- `violations_CAA_pg5_MD-3` 
CAAviolations <- CAAviolations[-c(20),]
CAAviolations$President <- as.character("Bush")
CAAviolations[9:16,3] <- as.character("Obama")
CAAviolations[17:19,3] <- as.character("Trump")
vCAAgraph <- ggplot(CAAviolations, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Violations", x="Year")+
  ggtitle("CAA violations")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CAAviolations$Count+(.2*max(CAAviolations$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016))+
  theme_meg()+
  theme(plot.title = element_text(color="#C21807"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
#clean up data
CAAinspections <- `inspections_CAA_pg5_MD-3`
CAAinspections <- CAAinspections[-c(20),]
CAAinspections$President <- as.character("Bush")
CAAinspections[9:16,3] <- as.character("Obama")
CAAinspections[17:19,3] <- as.character("Trump")
iCAAgraph <- ggplot(CAAinspections, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Inspections", x="Year")+
  ggtitle("CAA Inspections")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CAAinspections$Count+(.2*max(CAAinspections$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
#clean up data
CAAenforcement <- `enforcements_CAA_pg5_MD-3`
CAAenforcement <- CAAenforcement[-c(20),]
CAAenforcement$Amountinthousands <- ((CAAenforcement$Amount)/1000)
CAAenforcement$Amountinthousands <-round(CAAenforcement$Amountinthousands,0)
CAAenforcement$President <- as.character("Bush")
CAAenforcement[9:16,5] <- as.character("Obama")
CAAenforcement[17:19,5] <- as.character("Trump")
eCAAgraph <- ggplot(CAAenforcement, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Actions", x="Year")+
  ggtitle("CAA Enforcement Actions")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CAAenforcement$Count+(.2*max(CAAenforcement$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
fineCAAgraph <- ggplot(CAAenforcement, mapping=aes(x=factor(Date), y=Amountinthousands, fill=President, group=1))+
  geom_bar(stat="identity")+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" Fines($1000s)", x="Year")+
  ggtitle("CAA Fines")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CAAenforcement$Amountinthousands+(.2*max(CAAenforcement$Amountinthousands)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
(iCAAgraph | vCAAgraph) / (eCAAgraph | fineCAAgraph)
```

\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">
##### DRAFT not for circulation 

# Clean Water Act 

<div class="text-box-info">

The Clean Water Act is a series of regulations that govern discharges of pollutants and regulates water quality standards for waters of the United States. The CWA established the National Pollutant Discharge Elimination System (NPDES) which permits discharges of pollutants [EPA](https://www.epa.gov/laws-regulations/summary-clean-water-act). Unlike the CAA, CWA violations are reported automatically through the National Pollutant Discharge Elimination System (NPDES), so violations are recorded independently of facility inspections. CWA inspections often occur in response to recorded violations.
[More info on CWA](https://docs.google.com/presentation/d/1g6ZN3B5jvs3F1VAigiUtNNezjXdJnzuELfo9Deo9Y2w/edit?usp=sharing)
</div>
<h2>There are `r activefacilities[2,2] ` 
`r activefacilities[2,1]` facilities</h2>
```{r, fig.height = 5, fig.width = 8, fig.align = "center"}
#clean up data
CWAviolations <- `violations_CWA_pg6_MD-3`
names(CWAviolations)[2] <- "Count"
CWAviolations <- CWAviolations[-c(20),]
CWAviolations$President <- as.character("Bush")
CWAviolations[9:16,3] <- as.character("Obama")
CWAviolations[17:19,3] <- as.character("Trump")
vCWAgraph <- ggplot(CWAviolations, mapping=aes(x=factor(YEAR), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Violations", x="Year")+
  ggtitle("CWA violations")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CWAviolations$Count+(.2*max(CWAviolations$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016,2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#50C878"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
#clean up data
CWAinspections <- `inspections_CWA_pg6_MD-3`
CWAinspections <- CWAinspections[-c(20),]
CWAinspections$President <- as.character("Bush")
CWAinspections[9:16,3] <- as.character("Obama")
CWAinspections[17:19,3] <- as.character("Trump")
iCWAgraph <- ggplot(CWAinspections, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Inspections", x="Year")+
  ggtitle("CWA Inspections")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CWAinspections$Count+(.2*max(CWAinspections$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#50C878"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
#clean up data
CWAenforcement <- `enforcements_CWA_pg6_MD-3`
CWAenforcement <- CWAenforcement[-c(20),]
CWAenforcement$Amountinthousands <- ((CWAenforcement$Amount)/1000)
CWAenforcement$Amountinthousands <-round(CWAenforcement$Amountinthousands,0)
CWAenforcement$President <- as.character("Bush")
CWAenforcement[8:16,5] <- as.character("Obama")
CWAenforcement[17:19,5] <- as.character("Trump")
eCWAgraph <- ggplot(CWAenforcement, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Actions", x="Year")+
  ggtitle("CWA Enforcement Actions")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CWAenforcement$Count+(.2*max(CWAenforcement$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
fineCWAgraph <- ggplot(CWAenforcement, mapping=aes(x=factor(Date), y=Amountinthousands, fill=President, group=1))+
  geom_bar(stat="identity")+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" Fines($1000s)", x="Year")+
  ggtitle("CWA Fines")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(CWAenforcement$Amountinthousands+(.2*max(CWAenforcement$Amountinthousands)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016,2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
(iCWAgraph | vCWAgraph) / (eCWAgraph | fineCWAgraph)
```	


\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">

##### DRAFT not for circulation

# Resource Conservation and Recovery Act 


<div class="text-box-info">

The Resource Conservation and Recovery Act (RCRA) gives EPA the authority to 
control hazardous waste from the "cradle-to-grave", regulating the generation, transportation, treatment, storage, and disposal of hazardous waste. Although facilities self-report under RCRA, like the CAA, violations are most often found after an inspection, and a reduction in violations might mean a reduction in inspections. [EPA](https://www.epa.gov/laws-regulations/summary-resource-conservation-and-recovery-act) [More info on RCRA](https://docs.google.com/presentation/d/1lV9b_vkcfCbTz8uss1XjXLHy2svpi2tmizb6et1Wfkc/edit?usp=sharing)
</div>
<h2>There are `r activefacilities[3,2] ` 
`r activefacilities[3,1]` facilities</h2>
```{r, fig.height = 5, fig.width = 8, fig.align = "center"}
#clean up data
RCRAviolations <- `violations_RCRA_pg7_MD-3`
RCRAviolations <- RCRAviolations[-c(20),]
RCRAviolations$President <- as.character("Bush")
RCRAviolations[9:16,3] <- as.character("Obama")
RCRAviolations[17:19,3] <- as.character("Trump")
vRCRAgraph <- ggplot(RCRAviolations, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Violations", x="Year")+
  ggtitle("RCRA violations")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(RCRAviolations$Count+(.2*max(RCRAviolations$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016,2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#C21807"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
#clean up data
RCRAinspections <- `inspections_RCRA_pg7_MD-3`
RCRAinspections <- RCRAinspections[-c(20),]
RCRAinspections$President <- as.character("Bush")
RCRAinspections[9:16,3] <- as.character("Obama")
RCRAinspections[17:19,3] <- as.character("Trump")
iRCRAgraph <- ggplot(RCRAinspections, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Inspections", x="Year")+
  ggtitle("RCRA Inspections")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(RCRAinspections$Count+(.2*max(RCRAinspections$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012,2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
#clean up data
RCRAenforcement <- `enforcements_RCRA_pg7_MD-3`
RCRAenforcement <- RCRAenforcement[-c(20),]
RCRAenforcement$Amountinthousands <- ((RCRAenforcement$Amount)/1000)
RCRAenforcement$Amountinthousands <-round(RCRAenforcement$Amountinthousands,0)
RCRAenforcement$President <- as.character("Bush")
RCRAenforcement[8:16,5] <- as.character("Obama")
RCRAenforcement[17:19,5] <- as.character("Trump")
eRCRAgraph <- ggplot(RCRAenforcement, mapping=aes(x=factor(Date), y=Count, fill=President, group=1))+
  geom_bar(stat="identity", show.legend = FALSE)+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" # Actions", x="Year")+
  ggtitle("RCRA Enforcement Actions")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(RCRAenforcement$Count+(.2*max(RCRAenforcement$Count)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016, 2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
fineRCRAgraph <- ggplot(RCRAenforcement, mapping=aes(x=factor(Date), y=Amountinthousands, fill=President, group=1))+
  geom_bar(stat="identity")+
  scale_fill_manual(values=c("#450d54", "#22908d", "#e56d13"))+
  labs(y=" Fines($1000s)", x="Year")+
  ggtitle("RCRA Fines")+
  scale_y_continuous(expand=c(0,0), limits=c(0,max(RCRAenforcement$Amountinthousands+(.2*max(RCRAenforcement$Amountinthousands)))))+
  scale_x_discrete(breaks=c(2004,2008,2012, 2016,2019))+
  theme_meg()+
  theme(plot.title = element_text(color="#FFD300"), axis.text.x=element_text(size=10),
        axis.title.x = element_blank())
(iRCRAgraph | vRCRAgraph) / (eRCRAgraph | fineRCRAgraph)
```	

\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">


##### DRAFT not for circulation

# Legislator Information   

## John Sarbanes 

<a ><img src="/Users/mraisle/Documents/OneDrive - University of North Carolina at Chapel Hill/CD-report/MD3/john_sarbanes.png" style="float: left; width: 25%; margin-right: 5%" ></a>

<h2><span style="color:#25539f">Democrat</span></h2>
## In office since January 3rd, 2007

## Relevant Committee Membership:  [Energy and Commerce Committee](https://energycommerce.house.gov/)
<br />
<br />
<div class="text-box-info">
### [House Energy and Commerce Committee](https://energycommerce.house.gov/about-ec)
This Committee is the oldest house Committee with the broadest jurisdiction of aOR authorizing committee. The Committee oversees the EPA, and legislates on issues like environmental protection, clean air, climate change, safe drinking water, toxic chemicals and hazardous waste, and nuclear facilities. Currently, the Committee includes 55 members – 24 Republicans and 31 Democrats. The subcommittees of primary interest to these reports are Environment & Climate Change and Oversight & Investigations. 
</div>
### Relevant Subcommittees: 
1. House Committee on Energy and Commerce, Energy, Health, Oversight and Investigations subcommittees 
2. House Committee on Oversight and Reform, Government Operations subcommittee


\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">


##### DRAFT not for circulation  

# Data Limitations   

<div class="text-box-info">

<h3>Disclaimer</h3>

<p>On March 26, 2020, the US EPA released [a policy memo](https://www.epa.gov/sites/production/files/2020-03/documents/oecamemooncovid19implications.pdf) suspending pollution monitoring requirements for industries that claim to have been impacted by COVID-19. Since then, as part of EDGI’s ongoing Environmental Enforcement Watch (EEW) project, we have conducted original data science research using EPA’s Enforcement and Compliance History Online ECHO database to investigate the effects of this policy on facility reporting of environmental data and compliance with environmental protection laws. Results show that, despite relatively few facilities claiming the COVID exemption, a much larger proportion of facilities are still failing to report. While both industry non-compliance and EPA non-enforcement reflect longer-term trends (as much as 70% of facilities were already in non-compliance with the nation’s environmental laws for certain regulatory programs pre-COVID, [Giles 2020](http://eelp.law.harvard.edu/wp-content/uploads/Cynthia-Giles-Part-2-FINAL.pdf)), we have decided to exclude 2020 data from this analysis due to EPA’s COVID-19 policy. This decision serves to provide the fairest and most accurate picture of enforcement and compliance trends, and to avoid skewing and misrepresenting the data.
.</p>
</div>
The ECHO database compiles information from a number of distinct state and federal databases with inconsistent reporting schemes that lead to data gaps and inaccuracies such as geocoding errors (e.g. a facility in Texas is incorrectly coded as residing in Louisiana); multiple program IDs attributed to a single facility (which can cause one facility to appear as multiple, distinct facilities in the data); and an inability to know what/how maOR facilities operated in the past. EPA acknowledges some of these inconsistencies, and sometimes includes disclaimers on the ECHO website detailing them. The agency’s official position is that ECHO data is reliable-enough from 2001 onward, but former EPA Administrator Cynthia Giles says that states often report as little as 5% of compliance violations to ECHO for certain regulatory programs. 
Here are just some of the issues that prevent citizens from knowing how well pollution has been, and is, being controlled: 

* Some facilities chronically or repeatedly fail to comply with pollution laws. But available EPA data only goes back X years, so you cannot tell how well facilities in your area have complied with environmental protections over time. 
* No idea how maOR facilities operated in the past
* Multiple program IDs for a single facility/permit
* Geocoding errors
* Mislabeled times (e.g. the inspections that will occur in 2052)
* Data entry errors that place inspections and enforcements in the wrong year (some in the future!) and that place facilities in the wrong state or area.

\pagebreak

<hr style="height:3px;border-width:0;color: #C1E0D7;background-color: #C1E0D7; margin-top: 4em">


##### DRAFT not for circulation

# About the Authors

### About EEW and this Project

Environmental Enforcement Watch (EEW) is a collaborative project across EDGI working groups. The EEW project builds on EDGI’s 2019 [Sheep in the Closet Report](https://envirodatagov.org/publication/a-sheep-in-the-closet-the-erosion-of-enforcement-at-the-epa/) that documents large declines in EPA enforcement of environmental laws. This project and others used data from EPA’s [ECHO](https://echo.epa.gov/) database, revealing how useful ECHO could be for communities to track pollution and EPA responses in their areas. However, they also revealed the inaccessibility of ECHO for non-specialists, along with maOR omissions, errors, and confusions present in the data itself.

A key goal of EEW is to highlight gaps and inadequacies in the enforcement of environmental laws, demonstrating EPA’s failure to fulfill its congressionally mandated duty. To help bring awareness and action to the state of environmental non-compliance across the US, we are using Jupyter Notebooks that utilize ECHO data to present these congressional report cards for the 75 Senators and House Representatives that sit on the House Energy & Commerce Committee and the Senate Environment & Public Works Committee. By providing a novel and poignant look at the chronic state of non-compliance in their states and districts, we hope to provide these key representatives with the information and pressure they need to hold the EPA accountable. 


<div class="text-box-info">

<h3>About EDGI</h3>
<p>EDGI is an international network of over 175 members from more than 80 different academic institutions and non-profits, comprised foremost by grassroots volunteer efforts. Since 2016, EDGI has served as a preeminent watchdog group for federal environmental data, generating international effort to duplicate and monitor repositories of public data that are vital to environmental health research and knowledge.
EDGI’s work has been widely acknowledged, leading to EDGI testifying before Congress on declines in EPA enforcement, and hundreds of mentions in leading national and international media such as _The New York Times_,_The Washington Post_, Vice News, and CNN. For more about our work, read our [2019 Annual Report](https://envirodatagov.org/publication/edgi-annual-report-2019/)and [2020 Annual Report](https://envirodatagov.org/publication/edgi-annual-report-2020/).<p>

</div>


#### [Contact Us](https://www.environmentalenforcementwatch.org/contact/)

<a href="https://www.environmentalenforcementwatch.org/"><img src="/Users/mraisle/Documents/OneDrive - University of North Carolina at Chapel Hill/CD-report/reportcards/eew_logo.png" style="float: left; width: 25%; margin-left: 20%" ></a>

<a href="https://envirodatagov.org/"><img src="/Users/mraisle/Documents/OneDrive - University of North Carolina at Chapel Hill/CD-report/reportcards/edgi_logo.png" style="float: right; width: 35%; margin-right: 20%" ></a>
